{"ast":null,"code":"var _jsxFileName = \"/Users/gasparddechirot/Documents/hackathon/hackathon3/client/src/components/PostCard.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { UpvoteButton, DownvoteButton } from './VoteButtons';\nimport { notify } from '../reducers/notificationReducer';\nimport EditDeleteMenu from './EditDeleteMenu';\nimport getEditedThumbail from '../utils/cloudinaryTransform';\nimport { trimLink, prettifyLink, fixUrl } from '../utils/formatUrl';\nimport TimeAgo from 'timeago-react';\nimport getErrorMsg from '../utils/getErrorMsg';\nimport { Paper, Typography, useMediaQuery, CardMedia, Link, Button } from '@material-ui/core';\nimport { useCardStyles } from '../styles/muiStyles';\nimport { useTheme } from '@material-ui/core/styles';\nimport MessageIcon from '@material-ui/icons/Message';\nimport LinkIcon from '@material-ui/icons/Link';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport CommentIcon from '@material-ui/icons/Comment';\n\nconst PostCard = ({\n  post,\n  toggleUpvote,\n  toggleDownvote\n}) => {\n  _s();\n\n  const {\n    id,\n    title,\n    postType,\n    textSubmission,\n    linkSubmission,\n    imageSubmission,\n    subreddit,\n    author,\n    upvotedBy,\n    downvotedBy,\n    pointsCount,\n    commentCount,\n    createdAt,\n    updatedAt\n  } = post;\n  const classes = useCardStyles();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('xs'));\n  const dispatch = useDispatch();\n  const {\n    user,\n    darkMode\n  } = useSelector(state => state);\n  const isUpvoted = user && upvotedBy.includes(user.id);\n  const isDownvoted = user && downvotedBy.includes(user.id);\n\n  const handleUpvoteToggle = async () => {\n    try {\n      if (isUpvoted) {\n        const updatedUpvotedBy = upvotedBy.filter(u => u !== user.id);\n        dispatch(toggleUpvote(id, updatedUpvotedBy, downvotedBy));\n      } else {\n        const updatedUpvotedBy = [...upvotedBy, user.id];\n        const updatedDownvotedBy = downvotedBy.filter(d => d !== user.id);\n        dispatch(toggleUpvote(id, updatedUpvotedBy, updatedDownvotedBy));\n      }\n    } catch (err) {\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  const handleDownvoteToggle = async () => {\n    try {\n      if (isDownvoted) {\n        const updatedDownvotedBy = downvotedBy.filter(d => d !== user.id);\n        dispatch(toggleDownvote(id, updatedDownvotedBy, upvotedBy));\n      } else {\n        const updatedDownvotedBy = [...downvotedBy, user.id];\n        const updatedUpvotedBy = upvotedBy.filter(u => u !== user.id);\n        dispatch(toggleDownvote(id, updatedDownvotedBy, updatedUpvotedBy));\n      }\n    } catch (err) {\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  const linkToShow = postType === 'Link' ? linkSubmission : postType === 'Image' ? imageSubmission.imageLink : '';\n  const formattedLink = trimLink(prettifyLink(linkToShow), 30);\n  return /*#__PURE__*/React.createElement(Paper, {\n    className: classes.root,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.votesWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(UpvoteButton, {\n    user: user,\n    body: post,\n    handleUpvote: handleUpvoteToggle,\n    size: isMobile ? 'small' : 'medium',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    style: {\n      color: isUpvoted ? '#FF8b60' : isDownvoted ? '#9494FF' : darkMode ? '#e4e4e4' : '#333',\n      fontWeight: 600\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, pointsCount), /*#__PURE__*/React.createElement(DownvoteButton, {\n    user: user,\n    body: post,\n    handleDownvote: handleDownvoteToggle,\n    size: isMobile ? 'small' : 'medium',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.thumbnailWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, postType === 'Text' ? /*#__PURE__*/React.createElement(RouterLink, {\n    to: `/comments/${id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    elevation: 0,\n    square: true,\n    className: classes.thumbnail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MessageIcon, {\n    fontSize: \"inherit\",\n    className: classes.thumbnailIcon,\n    style: {\n      color: '#787878'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }))) : postType === 'Link' ? /*#__PURE__*/React.createElement(\"a\", {\n    href: fixUrl(linkSubmission),\n    target: \"_noblank\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    elevation: 0,\n    square: true,\n    className: classes.thumbnail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(LinkIcon, {\n    fontSize: \"inherit\",\n    className: classes.thumbnailIcon,\n    style: {\n      color: '#787878'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }))) : /*#__PURE__*/React.createElement(Paper, {\n    elevation: 0,\n    square: true,\n    className: classes.thumbnail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardMedia, {\n    className: classes.thumbnail,\n    title: title,\n    component: \"a\",\n    href: 'none',\n    target: \"_noblank\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      border: '1px solid #1dbf73',\n      borderRadius: '15px',\n      marginBottom: '20px',\n      display: 'flex',\n      width: '500px',\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '80%',\n      display: 'flex',\n      textAlign: 'center',\n      alignItems: 'center',\n      justifyContent: 'space-around'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }, ' ', /*#__PURE__*/React.createElement(\"img\", {\n    style: {\n      width: '70px',\n      height: '70px',\n      borderRadius: '100%'\n    },\n    src: \"https://99designs-blog.imgix.net/blog/wp-content/uploads/2018/09/fiverr-2018.png \",\n    alt: \" \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }), ' '), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      flexDirection: 'column'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }, \" Project \", post.title), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }, ' ', post.author.username, \" realised for \", post.title, ' ', /*#__PURE__*/React.createElement(\"em\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 15\n    }\n  }, \"Date : \", post.createdAt, \" \"), \" \", console.log(post))))));\n};\n\n_s(PostCard, \"GudHAjmORetKd/dGHg+lRyIOgFE=\", false, function () {\n  return [useCardStyles, useTheme, useMediaQuery, useDispatch, useSelector];\n});\n\n_c = PostCard;\nexport default PostCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostCard\");","map":{"version":3,"sources":["/Users/gasparddechirot/Documents/hackathon/hackathon3/client/src/components/PostCard.js"],"names":["React","useSelector","useDispatch","Link","RouterLink","UpvoteButton","DownvoteButton","notify","EditDeleteMenu","getEditedThumbail","trimLink","prettifyLink","fixUrl","TimeAgo","getErrorMsg","Paper","Typography","useMediaQuery","CardMedia","Button","useCardStyles","useTheme","MessageIcon","LinkIcon","OpenInNewIcon","CommentIcon","PostCard","post","toggleUpvote","toggleDownvote","id","title","postType","textSubmission","linkSubmission","imageSubmission","subreddit","author","upvotedBy","downvotedBy","pointsCount","commentCount","createdAt","updatedAt","classes","theme","isMobile","breakpoints","down","dispatch","user","darkMode","state","isUpvoted","includes","isDownvoted","handleUpvoteToggle","updatedUpvotedBy","filter","u","updatedDownvotedBy","d","err","handleDownvoteToggle","linkToShow","imageLink","formattedLink","root","votesWrapper","color","fontWeight","thumbnailWrapper","thumbnail","thumbnailIcon","border","borderRadius","marginBottom","display","width","alignItems","textAlign","justifyContent","height","flexDirection","username","console","log"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { UpvoteButton, DownvoteButton } from './VoteButtons';\nimport { notify } from '../reducers/notificationReducer';\nimport EditDeleteMenu from './EditDeleteMenu';\nimport getEditedThumbail from '../utils/cloudinaryTransform';\nimport { trimLink, prettifyLink, fixUrl } from '../utils/formatUrl';\nimport TimeAgo from 'timeago-react';\nimport getErrorMsg from '../utils/getErrorMsg';\n\nimport {\n  Paper,\n  Typography,\n  useMediaQuery,\n  CardMedia,\n  Link,\n  Button,\n} from '@material-ui/core';\nimport { useCardStyles } from '../styles/muiStyles';\nimport { useTheme } from '@material-ui/core/styles';\nimport MessageIcon from '@material-ui/icons/Message';\nimport LinkIcon from '@material-ui/icons/Link';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport CommentIcon from '@material-ui/icons/Comment';\n\nconst PostCard = ({ post, toggleUpvote, toggleDownvote }) => {\n  const {\n    id,\n    title,\n    postType,\n    textSubmission,\n    linkSubmission,\n    imageSubmission,\n    subreddit,\n    author,\n    upvotedBy,\n    downvotedBy,\n    pointsCount,\n    commentCount,\n    createdAt,\n    updatedAt,\n  } = post;\n\n  const classes = useCardStyles();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('xs'));\n  const dispatch = useDispatch();\n  const { user, darkMode } = useSelector((state) => state);\n\n  const isUpvoted = user && upvotedBy.includes(user.id);\n  const isDownvoted = user && downvotedBy.includes(user.id);\n\n  const handleUpvoteToggle = async () => {\n    try {\n      if (isUpvoted) {\n        const updatedUpvotedBy = upvotedBy.filter((u) => u !== user.id);\n        dispatch(toggleUpvote(id, updatedUpvotedBy, downvotedBy));\n      } else {\n        const updatedUpvotedBy = [...upvotedBy, user.id];\n        const updatedDownvotedBy = downvotedBy.filter((d) => d !== user.id);\n        dispatch(toggleUpvote(id, updatedUpvotedBy, updatedDownvotedBy));\n      }\n    } catch (err) {\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  const handleDownvoteToggle = async () => {\n    try {\n      if (isDownvoted) {\n        const updatedDownvotedBy = downvotedBy.filter((d) => d !== user.id);\n        dispatch(toggleDownvote(id, updatedDownvotedBy, upvotedBy));\n      } else {\n        const updatedDownvotedBy = [...downvotedBy, user.id];\n        const updatedUpvotedBy = upvotedBy.filter((u) => u !== user.id);\n        dispatch(toggleDownvote(id, updatedDownvotedBy, updatedUpvotedBy));\n      }\n    } catch (err) {\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  const linkToShow =\n    postType === 'Link'\n      ? linkSubmission\n      : postType === 'Image'\n      ? imageSubmission.imageLink\n      : '';\n\n  const formattedLink = trimLink(prettifyLink(linkToShow), 30);\n\n  return (\n    <Paper className={classes.root} variant='outlined'>\n      <div className={classes.votesWrapper}>\n        <UpvoteButton\n          user={user}\n          body={post}\n          handleUpvote={handleUpvoteToggle}\n          size={isMobile ? 'small' : 'medium'}\n        />\n        <Typography\n          variant='body1'\n          style={{\n            color: isUpvoted\n              ? '#FF8b60'\n              : isDownvoted\n              ? '#9494FF'\n              : darkMode\n              ? '#e4e4e4'\n              : '#333',\n            fontWeight: 600,\n          }}\n        >\n          {pointsCount}\n        </Typography>\n        <DownvoteButton\n          user={user}\n          body={post}\n          handleDownvote={handleDownvoteToggle}\n          size={isMobile ? 'small' : 'medium'}\n        />\n      </div>\n      <div className={classes.thumbnailWrapper}>\n        {postType === 'Text' ? (\n          <RouterLink to={`/comments/${id}`}>\n            <Paper elevation={0} square className={classes.thumbnail}>\n              <MessageIcon\n                fontSize='inherit'\n                className={classes.thumbnailIcon}\n                style={{ color: '#787878' }}\n              />\n            </Paper>\n          </RouterLink>\n        ) : postType === 'Link' ? (\n          <a href={fixUrl(linkSubmission)} target='_noblank'>\n            <Paper elevation={0} square className={classes.thumbnail}>\n              <LinkIcon\n                fontSize='inherit'\n                className={classes.thumbnailIcon}\n                style={{ color: '#787878' }}\n              />\n            </Paper>\n          </a>\n        ) : (\n          <Paper elevation={0} square className={classes.thumbnail}>\n            <CardMedia\n              className={classes.thumbnail}\n              title={title}\n              component='a'\n              href={'none'}\n              target='_noblank'\n            />\n          </Paper>\n        )}\n      </div>\n\n      <div\n        style={{\n          border: '1px solid #1dbf73',\n          borderRadius: '15px',\n          marginBottom: '20px',\n          display: 'flex',\n          width: '500px',\n          alignItems: 'center',\n        }}\n      >\n        <div\n          style={{\n            width: '80%',\n            display: 'flex',\n            textAlign: 'center',\n            alignItems: 'center',\n            justifyContent: 'space-around',\n          }}\n        >\n          <div>\n            {' '}\n            <img\n              style={{\n                width: '70px',\n                height: '70px',\n                borderRadius: '100%',\n              }}\n              src='https://99designs-blog.imgix.net/blog/wp-content/uploads/2018/09/fiverr-2018.png '\n              alt=' '\n            />{' '}\n          </div>\n          <div\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              flexDirection: 'column',\n            }}\n          >\n            <h1> Project {post.title}</h1>\n            <p>\n              {' '}\n              {post.author.username} realised for {post.title}{' '}\n              <em>Date : {post.createdAt} </em> {console.log(post)}\n            </p>\n          </div>\n        </div>\n      </div>\n    </Paper>\n  );\n};\n\nexport default PostCard;\n"]},"metadata":{},"sourceType":"module"}